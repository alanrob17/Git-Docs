<!DOCTYPE html>
<html>
<head>
<title>UsingGit.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="using-git">Using Git</h1>
<p>Check the version of Git you are currently using.</p>
<pre class="hljs"><code><div>	git --version
</div></code></pre>
<h2 id="set-the-default-branch-to-main">Set the default branch to main</h2>
<pre class="hljs"><code><div>	git config --global init.defaultBranch main
</div></code></pre>
<p>Now every time I create a new Git repository it will start on the <code>main</code> branch.</p>
<h2 id="update-git">Update Git</h2>
<pre class="hljs"><code><div>	git update-git-for-windows
</div></code></pre>
<p>Git changes the path to add the following variables.</p>
<pre class="hljs"><code><div>	C:\Program Files\Git\cmd;

	C:\Program Files\Git\mingw64\bin;

	C:\Program Files\Git\usr\bin;
</div></code></pre>
<p>Git creates a  config file in your users directory. Mine is C:\Users\alanr</p>
<pre class="hljs"><code><div>	cat .gitconfig
</div></code></pre>
<p>.</p>
<pre class="hljs"><code><div>	[user]
        name = Alan Robson
        email = alanr@live.com.au
</div></code></pre>
<p>You can also have a project level configuration file.</p>
<pre class="hljs"><code><div>	my_project/.git/config
</div></code></pre>
<p>You can make configuration changes on the following levels.</p>
<h4 id="system">System</h4>
<pre class="hljs"><code><div>	git config --system
</div></code></pre>
<h4 id="user">User</h4>
<pre class="hljs"><code><div>	git config --global
</div></code></pre>
<h4 id="project">Project</h4>
<pre class="hljs"><code><div>	git config
</div></code></pre>
<h3 id="changing-settings">Changing settings</h3>
<p>You can change settings with the following commands.</p>
<pre class="hljs"><code><div>	git config --global user.name <span class="hljs-string">"Alan Robson"</span>

	git config --global user.email <span class="hljs-string">"alanr@live.com.au"</span>
</div></code></pre>
<p>Check your configuration.</p>
<pre class="hljs"><code><div>	git config --list
</div></code></pre>
<p>Check an individual setting.</p>
<pre class="hljs"><code><div>	git config user.name
</div></code></pre>
<p>Change individual settings.</p>
<pre class="hljs"><code><div>	git config --global core.editor <span class="hljs-string">"C:\\Program Files\\Microsoft VS Code\\Code.exe --wait"</span>

	git config --global color.ui <span class="hljs-literal">true</span>
</div></code></pre>
<h2 id="git-help">Git Help</h2>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">help</span>

	git <span class="hljs-built_in">help</span> <span class="hljs-built_in">log</span>
</div></code></pre>
<h3 id="change-drives-in-git-bash">Change drives in Git bash</h3>
<pre class="hljs"><code><div>	<span class="hljs-built_in">cd</span> /D/Projects/Dirb
</div></code></pre>
<h2 id="distributed-version-conrol">Distributed Version Conrol</h2>
<p>Different users maintain their own repositories. (no central repository)</p>
<p>The changes are stored as <strong>change sets</strong> or <strong>patches</strong>.</p>
<p>We are tracking changes, not the versions of the document.</p>
<p>Change sets can be exchanged between repositories.</p>
<p>So you can &quot;merge in changes sets&quot; or &quot;apply patches&quot; between the different repositories.</p>
<p>No single master repository.</p>
<p>Many working copies each with their own combination of change sets.</p>
<p>These can then be merged at a later time or submitted for inclusion to the master copy.</p>
<h2 id="getting-started-with-git">Getting Started with Git</h2>
<p>In your projects directory create a new directory, e.g. Git-Docs.</p>
<p>cd into your new directory.</p>
<pre class="hljs"><code><div>	<span class="hljs-built_in">cd</span> /C/Git/Git-Docs
</div></code></pre>
<p>Now initialise the directory</p>
<pre class="hljs"><code><div>	git init
</div></code></pre>
<p>You get the message.</p>
<pre class="hljs"><code><div>	Initialized empty Git repository <span class="hljs-keyword">in</span> C:/Git/Git-Docs/.git/
</div></code></pre>
<p>This creates a hidden directory.</p>
<pre class="hljs"><code><div>	.git
</div></code></pre>
<p>This is where Git tracks its changes.</p>
<p>There is a configuration file,</p>
<pre class="hljs"><code><div>	cat .git/config
</div></code></pre>
<p>This is user level configuration. This is also where the project configuration resides as well.</p>
<p>The rest of the <strong>.git</strong> directory you should leave alone and let Git handle it.</p>
<p>If you remove the <strong>.git</strong> directory you will remove all of the tracking for this project. Git centalises everything in this one directory.</p>
<p>I can now add files into my directory.</p>
<p>I can track the status of the project by.</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<p>This will tell me that I have no commits yet and one untracked file.</p>
<p>I can now tell Git that I want to track the change and we can do that by.</p>
<pre class="hljs"><code><div>	git add .
</div></code></pre>
<p><code>.</code> is shorthand for all the files in the current directory.</p>
<p>Once we have done this we have told Git to do this we aren't tracking the changes and to make the changes permanent we need to commit them.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Initial commit."</span>
</div></code></pre>
<p>This is the process we are going to follow for every job we do.</p>
<h3 id="your-first-commit">Your first commit</h3>
<ul>
<li>Make changes.</li>
<li>Add the changes.</li>
<li>Commit changes to the repository with a message.</li>
</ul>
<p>We are going to do these three steps over and over again.</p>
<p>If I do a <em>git status</em> after I make some changes to the file I added it will tell me that the changes are not committed.</p>
<h2 id="writing-good-commit-messages">Writing good Commit messages</h2>
<p>A short single-line summary of what the changes are (less than 50 characters).</p>
<p>You can write multi-line commits as well by adding a blank line for a more complete description.</p>
<p>Keep each line to less than 72 characters.</p>
<p>Write commit messages in present tense not past tense.</p>
<p>&quot;Fixes a bug&quot; or &quot;Fix a bug&quot; not &quot;Fixed a bug&quot;.</p>
<p>The change message describes <em>what is in</em> a change set.</p>
<p>Bullet points are usually asterisks or hyphens. Can add &quot;tracking numbers&quot; from bug or support requests.</p>
<p>You can add the type of files that were changed in a shorthand [ccs, js] at the start of the message or the tracking number.</p>
<p>Make sure your messages are clear and descriptive.</p>
<h2 id="view-the-commit-log">View the Commit log</h2>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span>
</div></code></pre>
<p>Will show me a list of commits made for each project with the newest entry at the top.</p>
<blockquote>
<p>commit 5e8ac3e4e470e43dc17ad181bca04183d6f805d6 (HEAD -&gt; master)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Sun Sep 22 12:43:54 2019 +1000</p>
<pre><code>  Initial commit.
</code></pre>
</blockquote>
<p>Information in the message includes the sha value which is a unique key we can use to identify each commit. It shows me the author details and date of commit and gives me the message for the commit.</p>
<p>There are some other options in the <em>git log</em> command.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> -n 5
</div></code></pre>
<p>Limits the number of commits to 5.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> --since 2019-01-01
</div></code></pre>
<p>Shows me the commits since the start of this year.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> --author=<span class="hljs-string">"Alan"</span>
</div></code></pre>
<p>I don't have to type in the full name.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> --grep=<span class="hljs-string">"Init"</span>
</div></code></pre>
<p>or</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> --grep=<span class="hljs-string">"[Ii]nit"</span>
</div></code></pre>
<p>This would be handy for bug fixes if you had referenced that in your commits.</p>
<h2 id="setting-up-github">Setting up Github</h2>
<p>I am using Azure DevOps because it keeps my Git projects private.</p>
<p>I create a new repo and give it the same name as my local repository.</p>
<p>My repository will be named <code>Git-Docs</code>.</p>
<p>I will get a set of commands that I can use to link my local repository to my Azure repository.</p>
<p>First make sure that you don't already have a remote repository.</p>
<pre class="hljs"><code><div>	git remote -v
</div></code></pre>
<p>If you don't have a remote repository you can now create one.</p>
<pre class="hljs"><code><div>	git remote add origin https://alanr.visualstudio.com/Git-Docs/_git/Git-Docs
</div></code></pre>
<p>I can then push to the remote server.</p>
<pre class="hljs"><code><div>	git push -u origin --all
</div></code></pre>
<p>This will push all of my files up to the remote Azure server.</p>
<h2 id="git-concepts-and-architecture">Git Concepts and Architecture</h2>
<p>The usual structure for a version control system is a two tree structure.</p>
<p><img src="assets/git/twotree.jpg" alt="Two tree structure" title="Two tree structure"></p>
<p>The repository has a set of files. We then checkout those files to our working directory. At this stage they are the same.</p>
<p>When we finish doing changes in our working directory we commit those files back to the repository. We have two distinct trees.</p>
<p>Imagine that I have added information into my working files but haven't committed them back to the repository. Both sets of files are saved but in different states.</p>
<h3 id="the-three-trees">The Three Trees</h3>
<p>Git uses a three tree structure. It still has the repository and the working copy but also has a staging index tree in between the other two trees.</p>
<p><img src="assets/git/threetree.jpg" alt="Three tree structure" title="Three tree structure"></p>
<p>We have to save our files twice in a two-step process.</p>
<p>The first save is <strong>add</strong> to the staging index and then we <strong>commit</strong> to the repository.</p>
<p>We can skip the <strong>add</strong> step and commit directly to the repository. We will see this later but you should imagine a two-step procedure.</p>
<p>The reason for this is that we can have a number of changes to files in our working directory but only want to commit some of those to the repository. The three tree structure allows us to do this. We add the changes we want to the staging and get them ready before we commit them.</p>
<p>We can also go the other way. Pull them from the repository to the staging and then move them to the working but this isn't something we would usually do.</p>
<p>Usually we would pull from the repository directly to the working tree. In the process staging will be updated as well.</p>
<p>As you are working with Git it is worthwhile keeping these three trees in mind.</p>
<p>There is your working directory that has changes that might not be tracked by Git yet.</p>
<p>Then there is the staging index the contains changes that we are about to commit to the repository.</p>
<p>Finally there is the repository that is being tracked by Git. The changes that Git has and that it is going to keep hold of and keep track of.</p>
<h3 id="git-workflow">Git Workflow</h3>
<p>We will discuss a simple file and watch how it changes and is uploaded to the repository.</p>
<p><img src="assets/git/original-file.jpg" alt="The original file" title="The original file"></p>
<p>We have a file that is version 1 in our working directory. We call these changes <code>A</code>.</p>
<p><img src="assets/git/version-a.jpg" alt="Version A" title="Version A"></p>
<p>So at present it is in our working directory not our staging or our repository.</p>
<pre class="hljs"><code><div>	git add file.txt
</div></code></pre>
<p>Will add our file to the staging index.</p>
<p><strong>Note:</strong> We can <em>add</em> all files with a <code>.</code> or add multiple files in one commit.</p>
<pre class="hljs"><code><div>	git add file1.txt file2.txt
</div></code></pre>
<p>We can also add a directory of files.</p>
<pre class="hljs"><code><div>	git add tours/
</div></code></pre>
<p>Will save all files in the tours directory.</p>
<p><img src="assets/git/staging-a.jpg" alt="Staging A" title="Staging A"></p>
<p>Note: that at the moment we are just specifying a single file to be added.</p>
<p>We now use.</p>
<pre class="hljs"><code><div>	git commit
</div></code></pre>
<p>(we would add a message at this stage)</p>
<p>This pushes that changeset into the repository.</p>
<p><img src="assets/git/repository-a.jpg" alt="Repository A" title="Repository A"></p>
<p>So now we have the same file (changeset) in our working staging and repository.</p>
<p>Now imagine we are going to make changes to that file. So now we have version 2. We can refer to this changeset as B.</p>
<p><img src="assets/git/working-b.jpg" alt="Working B" title="Working B"></p>
<p>We then use <code>git add file.txt</code> again to add the changeset to the staging index and the <code>git commit</code> to add the changeset to the repository.</p>
<p><img src="assets/git/repository-b.jpg" alt="Repository B" title="Repository B"></p>
<p>Now the repository has two sets of changes in it (set A and set B).</p>
<p>You could keep adding to this.</p>
<p><img src="assets/git/repository-c.jpg" alt="Repository C" title="Repository C"></p>
<p>Now you can use <code>git log</code> to view those three commits (A,B, and C) to see what changed between each one. Of course Git doesn't refer to them as A,B and C but has a unique ID number that it applies to each changeset.</p>
<h3 id="more-on-workflow">More on workflow</h3>
<p>Now that we have added a remote repository there is an extra step in our process before we can upload files to all repositories. Carry out these steps</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<p>If there are unmodified files then you need to do this.</p>
<pre class="hljs"><code><div>	git add .
</div></code></pre>
<p>This will upload all changeset files to staging index.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Added workflow notes"</span>
</div></code></pre>
<p>Will commit the files to the local repository.</p>
<p>At this stage all files are in the same state.</p>
<p>Do a <code>git status</code> to make sure that nothing is modified and if so then push the latest files to the Azure repository.</p>
<pre class="hljs"><code><div>	git push -u origin --all
</div></code></pre>
<p>or now that the remote files have been initially pushed you can use this command.</p>
<pre class="hljs"><code><div>	git push
</div></code></pre>
<p>After this all files in the local and remote repositories are in the same state. Run a <code>git status</code> and you should receive this message.</p>
<blockquote>
<p>On branch master<br>
Your branch is up to date with 'origin/master'.</p>
<p>nothing to commit, working tree clean</p>
</blockquote>
<h3 id="hash-values-sha-1">Hash values (SHA-1)</h3>
<p>So far we have only worked with one file but usually it will be multiple files and directories and when we save it will a snapshot of all of those files in a changeset. We called the changesets A, B and C for simplicity but that is not how Git refers to them. Git generates a checksum for each changeset that is a hash value.</p>
<p>A checksum is a number that is calculated by taking the data and feeding it into a mathematical algorithm.</p>
<p>An important point to note is that the same data always equals the same checksum so it always returns the same results. That is why we call it a checksum because we can always check it and it will be the same. It is used to guarantee data integrity.</p>
<p>Data integrity is a fundamental that is built into Git.</p>
<p>The checksum that Git creates is tied to the data in that changeset. If you were to change that data then the label or hash value (checksum) would change. So each value is unique and directly tied to the contents inside of it.</p>
<p>Git uses the SHA-1 algorithm to create checksums. People refer to this as the sha value or s.h.a. value.</p>
<p>So if someone refers to the sha value of that commit they are talking about the checksum, the hash value that is used to refer to the value used to label the commit.</p>
<p>The number generated is a 40 character hexadecimal string.</p>
<blockquote>
<p>e.g. 94add12382d84b06472ba89d336c104cb646823a</p>
</blockquote>
<p>Not only does Git do that with our changeset it also does something else that is important for data integrity. In addition to using the code that is in one of our snapshots it also uses the metadata as well. That means that you can't change the commit message or the commit author or the <strong>parent</strong> of the commit without also changing its sha value. That gives us a nice chain of data integrity because when it goes to create snapshot A it takes all of its data to create a sha value. When it goes to snapshot B is also goes through the same process and generates a sha value but it includes the snapshot value from A so it is linked to A. If something changes in A the checksum changes and it won't point to B anymore.</p>
<p>So not only is there data integrity but there is also a history of changesets and how they relate to each other.</p>
<p><img src="assets/git/changesets.jpg" alt="Changeset linking" title="Changeset linking"></p>
<h3 id="the-head-value">The HEAD value</h3>
<p>Git contains a reference variable called <strong>HEAD</strong>. We call this variable a pointer and its purpose is to point to or reference a specific commit in the repository.</p>
<ul>
<li>Pointer to tip to the current branch (commit) in the repository.</li>
<li>Last state of repository, what was last checked out.</li>
<li>Points to parent of next commit where writing commits take place.</li>
</ul>
<p>As we make new commits the pointer changes or moves to point to a new commit. The HEAD always refers to the tip or the current branch in our repository. It has nothing to do with the staging index or the working repository. We are tracking the current position in the repository. Imagine a cassette recorder whose head moves to where the recording has stopped. When the recording starts again the head moves to the next stop.</p>
<p>The HEAD pointer in Git is very similar it points to the place where we are going to start recording next. It's the place where we left off in our repository with what we've committed.</p>
<p>To show how the HEAD works we will take the sha values from the previous diagram that shows our series of commits.</p>
<p><img src="assets/git/head-pointer.jpg" alt="HEAD pointer at the current branch" title="HEAD pointer at the current branch"></p>
<p>The HEAD points to the tip of our current branch in our repository.</p>
<p>It is the parent of the next commit we make so when we make our next commit is will be attached to the end next to <code>a614b5</code> that will become the parent. The HEAD becomes especially important when we start talking about branches.</p>
<p>The branch we are working on is called the master branch and that is our main branch.</p>
<p><img src="assets/git/master-branch.jpg" alt="Master branch" title="Master branch"></p>
<p>We can create a new branch and the HEAD will move to that branch.</p>
<p><img src="assets/git/new-branch.jpg" alt="New branch" title="New branch"></p>
<p>We can move the HEAD between the two branches. Git moves the HEAD for us we don't have to be concerned with that.</p>
<p>For our repository we can see where the HEAD exists.</p>
<pre class="hljs"><code><div>	ls -la .git
</div></code></pre>
<p>You will see that there is a file named HEAD.</p>
<blockquote>
<p>cat .git/HEAD<br>
ref: refs/heads/master</p>
</blockquote>
<p>This is telling us that we can find this information in the refs director</p>
<blockquote>
<p>cat .git/refs/heads/master<br>
938a47605721089babf0b4dfd7890fae7b91ac29</p>
<p>git log	<br>
commit 938a47605721089babf0b4dfd7890fae7b91ac29 (HEAD -&gt; master, origin/master)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Sun Sep 22 17:31:59 2019 +1000</p>
<p>Added more workflow notes.</p>
</blockquote>
<p>Note that <code>git log</code> will shows the commits and the latest sha value is the same as the one in <code>.git/refs/heads/master</code></p>
<p>The log also tells us that the sha value is the HEAD -&gt; master.</p>
<p>Git will move the head for us in most cases so we do not need to be aware of this but it is useful to understand the concept and what Git is doing for us.</p>
<h2 id="make-changes-to-files">Make changes to files</h2>
<h3 id="add-files">Add files</h3>
<p>When you have committed your files you do a <code>git status</code> it will tell you that there is nothing to commit and your working tree is clean.</p>
<p>If you add new files to you directory and do another <code>git status</code> you will get a different message. On branch master you have untracked files and a list of the files that aren't being tracked. There is also a message that you can use <code>git add</code> to track these files.</p>
<p>If we make any changes to these files before we do the <code>git add</code> process then these changes won't be tracked. So in this case you won't have a record of what has changed.</p>
<p>Doing a <code>git add</code> will move the files into the staging tree.</p>
<p>You can move all files with a <code>.</code> or name each file to be added. Say we had two files to add, second_file.txt and third_file.txt.</p>
<p>We will only add one file, second_file.txt.</p>
<p>Now do a <code>git status</code> again and you will see the following message.</p>
<p><img src="assets/git/git-add.jpg" alt="Git add" title="Git add"></p>
<p>It will tell you that you have one file to be committed (unstaged) and one file to add (untracked).</p>
<p>We can commit our one staging file by.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Add second file to project."</span>
</div></code></pre>
<p>Do a <code>git log</code> and you will see that there is a new sha value and that the HEAD has moved.</p>
<p>Now you can <code>git add third_file</code> to move the untracked file to staging and then do a <code>git commit -m &quot;Add third file to project&quot;</code>.</p>
<p><code>git log</code> will tell you that the third_file.txt was committed (the HEAD will have moved) and a <code>git status</code> will tell you that there is nothing else to do.</p>
<h3 id="view-changes-with-diff">View changes with <code>diff</code></h3>
<p>This allows us to see changes in our working directory.</p>
<pre class="hljs"><code><div>	git diff
</div></code></pre>
<blockquote>
<p>diff --git a/UsingGit.md b/UsingGit.md<br>
index dc92054..6e7d904 100644		<br>
--- a/UsingGit.md<br>
+++ b/UsingGit.md</p>
</blockquote>
<p>File <strong>a</strong> is in my repository and file <strong>b</strong> is in my working directory. The list has a number of <code>+</code> lines which have been added to my working file. They are also coloured green.</p>
<p>The <code>-</code> will tell you a line has been changed or removed.</p>
<p><strong>Note:</strong> We can do a <em>diff</em> on a particular file in the changeset.</p>
<pre class="hljs"><code><div>	git diff file.txt
</div></code></pre>
<h3 id="view-only-staged-changes">View only staged changes</h3>
<pre class="hljs"><code><div>	git diff --staged
</div></code></pre>
<p>This will show us the differences between the staging area and the repository.</p>
<pre class="hljs"><code><div>	git diff --cached
</div></code></pre>
<p>Is exactly the same thing as <code>--staged</code>. cached is an alias but it is preferable to use staged.</p>
<h3 id="deleting-files">Deleting files</h3>
<p>You have to tell Git that you want to delete files that you have committed.</p>
<p>First add a couple of files to your project to delete.</p>
<p>file-delete1.txt</p>
<p>file-delete2.txt</p>
<p>Commit these new files to your repositories.</p>
<p>There are two ways to delete files from your project.</p>
<p>The first technique is to just delete the file from the directory. We will delete file 1.</p>
<p><code>git status</code> will give you the message.</p>
<blockquote>
<p>Changes not staged for commit:<br>
(use &quot;git add/rm <file>...&quot; to update what will be committed)<br>
(use &quot;git restore <file>...&quot; to discard changes in working directory)<br>
deleted:    file-delete1.txt</p>
</blockquote>
<p>It tells you that you have deleted a file.</p>
<p>Now to remove it from Git.</p>
<pre class="hljs"><code><div>	git rm file-delete1.txt
</div></code></pre>
<p>it will give you this message. It tells you that it has removed the file from the repository.</p>
<blockquote>
<p>rm 'file-delete1.txt'</p>
</blockquote>
<p><code>git status</code> tells us that the file is now in the staging area.</p>
<blockquote>
<p>Changes to be committed:<br>
(use &quot;git restore --staged <file>...&quot; to unstage)<br>
deleted:    file-delete1.txt</p>
</blockquote>
<p>Now to get rid of it from staging.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Delete first file."</span>
</div></code></pre>
<p>You get this message.</p>
<blockquote>
<p>git commit -m &quot;Delete first file.&quot;<br>
[master 6f42ee0] Delete first file.<br>
1 file changed, 1 deletion(-)<br>
delete mode 100644 file-delete1.txt</p>
</blockquote>
<p>The second technique to remove a file is to tell Git to remove it.</p>
<pre class="hljs"><code><div>	git rm file-delete2.txt
</div></code></pre>
<p>You will get a message saying that Git has removed the file. If you look in your directory you will see that it has gone. It is a Unix command that has removed the file and you will notice that it isn't in your recycle bin as well.</p>
<p>It is still in the repository so we could get a copy from there if we needed it.</p>
<p><code>git status</code> tells you that the file 2 is in the staging directory.</p>
<p>This is a step shorter than the first technique as Git deletes the file for you and adds it to the staging directory.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Delete second file."</span>
</div></code></pre>
<p><code>git status</code> should report that there is nothing to do.</p>
<h3 id="move-and-rename-files">Move and rename files</h3>
<p>There are two techniques to move or rename files.</p>
<p>The first is to rename the file in my directory.</p>
<p><code>git status</code> tells me that there are two files changed.</p>
<p><img src="assets/git/rename-file.jpg" alt="Rename file" title="Rename file"></p>
<p>The original filename has been deleted and the renamed file isn't being tracked. It is listing them as two separate events.</p>
<p>So now you have two steps to do.</p>
<pre class="hljs"><code><div>	git add primary_file.txt
	git rm first_file.txt
</div></code></pre>
<p><img src="assets/git/rename-file.jpg" alt="Rename file" title="Rename file"></p>
<p>Git now recognises that we have renamed the file. It doesn't pick up on it initially but it does pick it up in staging.</p>
<p>The next technique for renaming a file is to <strong>move</strong> it.</p>
<pre class="hljs"><code><div>	git mv second_file.txt secondary_file.txt
</div></code></pre>
<p>The file name has been changed in our directory and <code>git status</code> tells us that the file has been added to our staging area and that we have renamed the file.</p>
<p><img src="assets/git/rename-second-file.jpg" alt="Rename second file" title="Rename second file"></p>
<p>The second technique is a little more efficient.</p>
<p>Now we can add a new directory into our project and then move a file from the root into the new directory.</p>
<p>The file will be flagged as deleted and the new directory will be flagged as a new file that is untracked.</p>
<p>Now in the directory shift the file back into the root and run this command.</p>
<pre class="hljs"><code><div>	git mv third_file.txt first_directory/third_file.txt
</div></code></pre>
<p><img src="assets/git/move-file.jpg" alt="Move file" title="Move file"></p>
<p>This is more efficient as it puts all the changes into staging. It has also moved the file.</p>
<p>Now wrap up by committing the changes.</p>
<h3 id="diff-options">Diff options</h3>
<pre class="hljs"><code><div>	git diff
</div></code></pre>
<p>This will fold (wrap) the text in bash. If you don't want to fold text.</p>
<pre class="hljs"><code><div>	-S
</div></code></pre>
<p>To wrap again just do another -S.</p>
<blockquote>
<p>b - to move back in the diff (or the Up arrow)</p>
<p>f - to move forward in the diff (or the Down arrow)</p>
</blockquote>
<p>Diff will show the whole line of text that contains the change. If you only want to show the text is old and new.</p>
<pre class="hljs"><code><div>	git diff --color-words
</div></code></pre>
<p>This will highlight only the changed text in colour.</p>
<p>To compare two commits.</p>
<pre class="hljs"><code><div>	git diff 12ac456..a234d4c6
</div></code></pre>
<p>Where the first sha value is the oldest and the next sha value is later.</p>
<p>or</p>
<pre class="hljs"><code><div>	git diff 12ac456..HEAD
</div></code></pre>
<p>Where the first value is the older sha value and the next is the latest (HEAD) value.</p>
<p>You can also select a changeset (commit) to view.</p>
<pre class="hljs"><code><div>	git show 5337a16679e8a200d57354444fa84a95d3658f50
</div></code></pre>
<p>Once again you could also add <code>--color-words</code> to this line</p>
<pre class="hljs"><code><div>	git show 5337a16679e8a200d57354444fa84a95d3658f50 --color-words
</div></code></pre>
<h3 id="commit-in-one-step">Commit in one step</h3>
<p>You can bypass the <code>add</code> to staging step.</p>
<pre class="hljs"><code><div>	git commit -am <span class="hljs-string">"Fixes blah, blah."</span>
</div></code></pre>
<p>Note: There are two important caveats.</p>
<ul>
<li>Stages and commits all changes to <em>tracked</em> files.</li>
<li>Does not includes untracked files.</li>
</ul>
<p>You can also commit with a multiple line message.</p>
<pre class="hljs"><code><div>	git commit -a
</div></code></pre>
<p>This will stop and wait for you to add a multiple line comment in your text editor.</p>
<p><img src="assets/git/multiple-lines.jpg" alt="Multiple lines" title="Multiple lines"></p>
<p>Once you have saved and closed the commit message editor window in your text editor you will go back to bash and see the final message letting you know that you have committed your changeset.</p>
<p><img src="assets/git/commit-message.jpg" alt="Commit message" title="Commit message"></p>
<h3 id="log-options">Log options</h3>
<p>You can limit the number of commits you see in the log.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> -n1
</div></code></pre>
<p>This limits to the latest commit.</p>
<p>To only see the first line of each commit.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> --oneline
</div></code></pre>
<p>This will show you a one line message for each commit.</p>
<h2 id="using-git-in-a-real-project">Using Git in a real project</h2>
<p>We are using Git for the Explore California website project. We open the directory in the directory structure where we keep our projects.</p>
<p>If you run <code>git status</code> in the directory you will get a message stating that the directory is not a Git repository. This means that if we want Git to track our files we need to initialise the directory.</p>
<pre class="hljs"><code><div>	git init
</div></code></pre>
<p>Now if you do an <code>ls -la</code> you will see that we have a <strong>.git</strong> directory in our directory. This shows us that Git has been added. If we do a <code>git status</code> now we will see that we have untracked files.</p>
<p>If you do a <code>git log</code> you will get an error because the HEAD is not pointed at anything meaning that we haven't committed yet.</p>
<p>So now we do a commit.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Initial commit."</span>
</div></code></pre>
<p>This adds all of the files to our repository.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span>
</div></code></pre>
<p>Will show our first commit.</p>
<p>Note that each directory in your working directory that has a <strong>.git</strong> directory in it is a separate Git repository.</p>
<h3 id="making-atomic-commits">Making atomic commits</h3>
<p>These are small commits and are a best practice.</p>
<ul>
<li>Only affect a single aspect.</li>
<li>Easier to understand when we work with them and to find bugs inside of them.</li>
</ul>
<p>Makes it easier to work when you collaborate with other people.</p>
<h2 id="undo-changes">Undo Changes</h2>
<h3 id="undo-working-directory-changes">Undo working directory changes</h3>
<p>In this case we are going to delete the navigation from the Index.html file. We have closed our text editor and saved file changes to the working directory.</p>
<p>We then realise that we didn't really mean to make these changes and we can't use the editor to undo the changes.</p>
<p>We still have a copy of the original file in Git's repository so we can bring it back with the following command.</p>
<pre class="hljs"><code><div>	git checkout -- index.html
</div></code></pre>
<p>The double dash <strong>--</strong> is telling Git that we want to checkout from the current branch.</p>
<p>Once we do this it will return the copy of <em>index.html</em> from the repository and place it in or working directory.</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<p>Tells us that there is nothing to do.</p>
<p>If you look at <em>index.html</em> you will see that it is back to its original state.</p>
<h3 id="unstage-files">Unstage files</h3>
<p>We will do a global search for $150 and replace that price with $175. This will do 11 changes across 10 files.</p>
<p><code>git status</code> tells us that we have a number of files to update. We will only update the files in the tours directory.</p>
<pre class="hljs"><code><div>	git add tours*
</div></code></pre>
<p><img src="assets/git/staging-status.jpg" alt="Staging status" title="Staging status"></p>
<p>Say we decide to unstage the tours files we can do this by</p>
<pre class="hljs"><code><div>	git reset HEAD tours*
</div></code></pre>
<p>This will remove the tours files from the staging tree.</p>
<p><img src="assets/git/git-reset.jpg" alt="Reset the staging tree" title="Reset the staging tree"></p>
<p>Now let's revert the files back to the way they were before we did the changes.</p>
<pre class="hljs"><code><div>	git checkout -- .
</div></code></pre>
<p><code>git status</code> and a check of the files will tell us that we are back to the unchanged state.</p>
<h3 id="amending-commits">Amending commits</h3>
<p>We are going to amend commits that are already in the repository.</p>
<p>Remember that we can't change any of the old commits without breaking the chain. There is one set of commits that we can change and that is the current (HEAD) commit.</p>
<p>We are going to change the resource.html file. Change the order of sunglasses and sunscreen. We will place them under hat. <code>git diff</code> will show us what has changed.</p>
<pre class="hljs"><code><div>	git commit -am <span class="hljs-string">"Changed items to bring."</span>
</div></code></pre>
<p><code>git status</code> shows us there is nothing to do and <code>git diff -n1</code> shows us the current commit with the message &quot;Changed items to bring.&quot;.</p>
<p>Now we realise that we needed to shift insect repellant up with the other changes we made in the current commit. Let's do this.</p>
<p><code>git diff</code> shows us what has changed and we want to amend this to the previous (HEAD) commit.</p>
<p>first,</p>
<pre class="hljs"><code><div>	git add resources.html
</div></code></pre>
<p><code>get status</code> will show us that it is now staged.</p>
<p>Do a <code>git log --oneline</code>.</p>
<p><img src="assets/git/log1.jpg" alt="git log 1" title="git log 1"></p>
<p>If we want log1 to the previous commit.</p>
<pre class="hljs"><code><div>	git commit --amend -m <span class="hljs-string">"Reorder recommended items for trip."</span>
</div></code></pre>
<p>Now do another <code>git log --oneline</code>.</p>
<p><img src="assets/git/log2.jpg" alt="git log 2" title="git log 2"></p>
<p>Notice that the comment in the previous commit has been changed to the new amended message. Also notice that the sha has changed because the files have been changed.</p>
<p>If we do a <code>git show</code>.</p>
<blockquote>
<p>git show 9c20b462a8da7834b9652ace8107848b64fd4423</p>
</blockquote>
<p>We can see that we have all of the changes.</p>
<p><img src="assets/git/git-show.jpg" alt="git show" title="git show"></p>
<p>Now we have decided that we want to amend the message for the previous commit.</p>
<pre class="hljs"><code><div>	git commit --amend -m <span class="hljs-string">"Reorder recommended items for outdoor trip."</span>
</div></code></pre>
<p><code>git log -n1</code> will show us that the message has been amended. Note also that the sha value changed even though all I changed was the message.</p>
<h3 id="retrieve-old-versions-of-files">Retrieve old versions of files</h3>
<p>Git only allows amending the most recent commit otherwise we wouldn't be able to verify the chain of integrity.</p>
<p>Edits which undergo changes should be new commits.</p>
<p>It maybe helpful to retrieve an old version of a file.</p>
<p>We did a small change to the <em>index.html</em> file. Do a <code>git log -n1</code> to try and find the commit where we changed <em>index.html</em>.</p>
<p><img src="assets/git/git-show.jpg" alt="git show" title="git show"></p>
<p>It has a sha value of 48cba47.</p>
<pre class="hljs"><code><div>	git show 48cba47 --color-words
</div></code></pre>
<p>Will show you where the change occurred but we really want the commit before that which has a sha value of 18b0d3e.</p>
<p>I want the <em>index.html</em> page from that commit.</p>
<pre class="hljs"><code><div>	git checkout 18b0d3e -- index.html
</div></code></pre>
<p><code>git status</code> will show that file in the staging directory. So now I can do a,</p>
<pre class="hljs"><code><div>	git diff --staged
</div></code></pre>
<p><img src="assets/git/change.jpg" alt="Show changes" title="Show changes"></p>
<p>The text in red (you'll) is what was the old version and the green (you will) is what is in the staging file and the working directory so we have reverted back to the old version of the file.</p>
<p>Looking at the index page you will see that the text has reverted back to the original &quot;you'll&quot; text.</p>
<p>do a <code>git diff --staged --color-words</code> and you will see that the change is in the staging directory.</p>
<p>Now we can commit that change and we will have both changes committed.</p>
<pre class="hljs"><code><div>	git commit index.html -m <span class="hljs-string">"Revert back to original text."</span>
</div></code></pre>
<p><code>git log</code> will show that we have both commits.</p>
<h3 id="revert-a-commit">Revert a commit</h3>
<p>Reverting a commit is to just undo that commit.</p>
<p>We have decided that we were wrong to make the last change so we want to revert that change (revert the commit).</p>
<p>We can do this because the commit is the last commit and we won't upset the chain if we change the last commit.</p>
<p>We are going to make a commit that reverses the last commit. There is an even easier way than the way we did it previously.</p>
<p>Do a <code>git log -n1</code> to get the sha value of the last commit. 5e3ad0f185cc</p>
<p>now revert by.</p>
<pre class="hljs"><code><div>	git revert 5e3ad0f185cc
</div></code></pre>
<p>This will open your editor with a message about reverting. You can add extra text if you want but if not jst save and close. Now check the logs again and you will see the latest commit has the message about reverting.</p>
<p><img src="assets/git/revert.jpg" alt="Revert the previous commit" title="Revert the previous commit"></p>
<p>You will see the HEAD message,</p>
<blockquote>
<p>Revert &quot;Revert back to original text.&quot;</p>
<p>This reverts commit 5e3ad0f185cc422360de01c300e3b30bf87cab32.</p>
</blockquote>
<p>It tells you that you have reverted the previous commit and the sha value of the previous commit is there for reference.</p>
<pre class="hljs"><code><div>	git show HEAD --color-words
</div></code></pre>
<p>Will show you the latest changes and a quick look at the index page shows that you have reverted back to the original text.</p>
<p><code>git show HEAD</code> is a good way to look at the latest commit changes.</p>
<h3 id="removing-untracked-files">Removing untracked files</h3>
<p>We occasionally have untracked files that we don't really need in our project. There is an easy way to remove these using Git rather than deleting them manually.</p>
<p>Imaging we have three text files in our project - junk1.txt, junk2.txt and junk3.txt.</p>
<p><code>git status</code> tells us that we have three untracked files ready to be added.</p>
<pre class="hljs"><code><div>	git clean -n
</div></code></pre>
<p>Warns us about what can be removed. This is a dry run, a safety net. The message we receive is.</p>
<blockquote>
<p>Would remove junk1.txt<br>
Would remove junk2.txt<br>
Would remove junk3.txt</p>
</blockquote>
<p>Let's add <em>junk1.txt</em> to staging.</p>
<pre class="hljs"><code><div>	git add junk1.txt
</div></code></pre>
<p>Run <code>git clean -n</code> again and it tells us.</p>
<blockquote>
<p>Would remove junk2.txt<br>
Would remove junk3.txt</p>
</blockquote>
<p><em>junk1.txt</em> is in the staging area so won't be removed. It is only removing untracked files, not files in the staging tree or repository. It is only removing files in my working directory.</p>
<pre class="hljs"><code><div>	git clean -f
</div></code></pre>
<p>This is the message we receive.<br>
<code>-f</code> is the force removal of items. It will totally remove these files. This is the message we receive.</p>
<blockquote>
<p>Removing junk2.txt<br>
Removing junk3.txt</p>
</blockquote>
<p>If I do a <code>git status</code> it will tell me that <em>junk1.txt</em> is in the staging tree.</p>
<pre class="hljs"><code><div>	git reset HEAD junk1.txt
</div></code></pre>
<p>Will remove it from the staging tree and then we can remove it by.</p>
<pre class="hljs"><code><div>	git clean -f
</div></code></pre>
<p>This will remove the file permanently and give us the message.</p>
<blockquote>
<p>Removing junk1.txt</p>
</blockquote>
<p>This is a destructive process so use with care. as a safety net run <code>git clean -n</code> before you run <code>git clean -f</code>.</p>
<h2 id="ignore-files">Ignore files</h2>
<h3 id="use-gitignore-files">Use .gitignore files</h3>
<p>Git does a great job of tracking files and noticing when they have changed but what if we don't want to track particular files? What id they are temporary files or files we don't want to track.</p>
<p>You can put a file in the root of your project named <strong>.gitignore</strong>. It contains:</p>
<ul>
<li>List of rules to determine which files to ignore.</li>
<li>Changes made to ignored files will be ignored by Git.</li>
</ul>
<p>We can put in a simple rule or we can use pattern matching (basic regular expressions).</p>
<pre class="hljs"><code><div>	?*[aeiou][0-9]
</div></code></pre>
<p>If we want to ignore all log files in the log directory</p>
<pre class="hljs"><code><div>	logs/*.txt
</div></code></pre>
<p>This ignores all <em>php</em> files but we don't want to ignore <em>index.php</em>.</p>
<pre class="hljs"><code><div>	*.php
	!index.php
</div></code></pre>
<p>To ignore all files in a directory use the trailing slash.</p>
<pre class="hljs"><code><div>	assets/videos/
</div></code></pre>
<p>Would ignore all files in the videos directory.</p>
<p>You can put comments in a <code>.gitignore</code> file.</p>
<pre class="hljs"><code><div>	<span class="hljs-comment"># This is a comment</span>
</div></code></pre>
<p>Blank lines are skipped.</p>
<p>Imagine we have a log file in our directory named <em>access.log</em> and it keeps changing all the time. We wouldn't want Git to track these changes.</p>
<p><code>git status</code> tells us that there is a new file not being tracked.</p>
<p>Add another new file named <strong>.gitignore</strong> and add the line <em>access.log</em> to it.</p>
<p>Now if you do a <code>git status</code> it will tell you that there is only one untracked file named <em>.gitignore</em> and <em>access.log</em> is ignored.</p>
<p>Add these changes to <em>.gitignore</em></p>
<pre class="hljs"><code><div>	<span class="hljs-comment"># Demo example</span>

	.DS_Store
	thumbs.db
	*.bak
	*.tmp
	*.zip
	*.rar
	*.<span class="hljs-built_in">log</span>
	<span class="hljs-built_in">log</span>/*.<span class="hljs-built_in">log</span>
	<span class="hljs-built_in">log</span>/*.<span class="hljs-built_in">log</span>[0-9]
	assets/photoshop/
	assets/videos/
	!assets/videos/tours_*.mp4
	access.log
</div></code></pre>
<p>Now commit the <em>.gitignore</em> file.</p>
<pre class="hljs"><code><div>	git add .gitignore

	git commit -am <span class="hljs-string">"Add .gitignore file."</span>
</div></code></pre>
<p>Github keep a set of gitignore files for projects like Visual Studio solutions. You can see these at:</p>
<p><a href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p>
<h3 id="globally-ignore-files">Globally ignore files</h3>
<p>You can set a global gitignore file with any name. It is bes to save this in your user directory. We can create this by:</p>
<pre class="hljs"><code><div>	git config --global core.excludesfile ~/.gitignore-global
</div></code></pre>
<p>This will create a global gitignore file but I ended up having to create it in my Users/alanr directory manually.</p>
<p>You may want to put your gitignores in the project file for each project so that if somebody clones your project they can have the same set of gitignores as you.</p>
<p>If you don't want to copy the same set of gitignores to each project then add them to a global gitignores file.</p>
<p>I have decided to just keep the obvious files in my global gitignores file.</p>
<pre class="hljs"><code><div>	*.tmp
	*.bak
	thumbs.db
	*.<span class="hljs-built_in">log</span>
</div></code></pre>
<h3 id="ignore-tracked-files">Ignore tracked files</h3>
<p>You can ignore files that aren't being tracked but you can't easily ignore files that are already being tracked.</p>
<p>We can tell Git to ignore files that we are already tracking with a bit of work.</p>
<p>Let's create a fake db configuration file named <em>db_config.txt</em>. Add some database keys in it.</p>
<p>Do a <code>git status</code> and you will see a new untracked file.</p>
<pre class="hljs"><code><div>	git add db_config.txt

	git commit -m <span class="hljs-string">"Add database configuration file."</span>
</div></code></pre>
<p>Now we have committed the file so we are tracking it and any changes to it will be tracked.</p>
<p>Now let's tell <em>.gitignore</em> to ignore **db_config.txt. Do a <code>git status</code> and you will see you have made changes to <em>.gitignore</em>.</p>
<p>Now make a change to <em>db_config.txt</em>.</p>
<p>Do a <code>git status</code> again and you will notice that it <strong>hasn't</strong> ignored <em>db_config.txt</em> as we expected.</p>
<p>This is our problem. Git doesn't ignore this file even though we asked it to ignore the file. Git seems to want to hold onto the file and keep on tracking it.</p>
<p>We could use the following command:</p>
<pre class="hljs"><code><div>	git rm db_config.txt
</div></code></pre>
<p>This would remove the file from our working directory and move it to the staging tree ready for us to commit and then the file would be gone. That would be one way to get rid of it but we don't want to remove it from our working directory. What we want to do is remove it from our staging index. The way we can do this is to:</p>
<pre class="hljs"><code><div>	git rm --cached db_config.txt
</div></code></pre>
<p>Remember that <code>git diff --staged</code> or <code>git diff --cached</code> are the same. That is not the case with <code>rm</code>.</p>
<p>It gives us the message that it has:</p>
<pre class="hljs"><code><div>	rm <span class="hljs-string">'db_config.txt'</span>
</div></code></pre>
<p>If you look in the directory you will see the file <em>db_config.txt</em> and a <code>git status</code> gives us the following message.</p>
<p><img src="assets/git/cached.jpg" alt="git rm --cached message" title="git rm --cached message"></p>
<pre class="hljs"><code><div>	git diff --staged
</div></code></pre>
<p>Tells us that the file is ready for deletion. It has deleted the <em>db_config.txt</em> file but it is still in our working directory.</p>
<pre class="hljs"><code><div>	git add .gitignore
</div></code></pre>
<p>So <code>git status</code> tells us that we have two files to be committed.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Stop tracking changes to db_config.txt"</span>
</div></code></pre>
<p><code>git status</code> tells us that there is nothing to be committed and our file is still there.</p>
<p>Now make a change to <em>db_config.txt</em>.</p>
<p>Do a <code>git status</code> and you see that it is not tracking the changes to <em>db_config.txt</em>.</p>
<p>Now our <em>.gitignore</em> is working. The file is still in our repository and if someone comes along and clones our project they will get the <em>db_config.txt</em> file in their project.</p>
<h3 id="track-empty-directories">Track empty directories</h3>
<p>Git doesn't track empty directories. We can prove this because there is an <em>explorers</em> directory in our project that is empty.</p>
<pre class="hljs"><code><div>	git ls-tree HEAD
</div></code></pre>
<p>This command will list all files/directories in the project directory at the time of the last commit.</p>
<p>It lists the <em>resources</em> directory because it has a <em>faq.html</em> file in it but ignores the <em>explorers</em> directory because there are no files in it. This proves that Git doesn't track empty directories.<br>
Do another test to prove this. Add a <em>temp</em> directory into our project.</p>
<p><code>git status</code> tells us there are no commits so it doesn't recognise this directory.</p>
<p>Git is a file tracking system so it tracks directories to get to files but ignores the directories with no files.</p>
<p>This is a problem because we want the <em>temp</em> directory to be a part of our project. It could be for future purposes and we want to be sure that anybody using our project has access to that directory.</p>
<p>There is a way around this by adding a <strong>.gitkeep</strong> empty file in the <em>temp</em> directory.</p>
<p>Add a <em>.gitkeep</em> empty file into our <em>explorers</em> directory.</p>
<p><code>git status</code> tells us that <em>explorers/</em> is an untracked directory.</p>
<pre class="hljs"><code><div>	git add explorers/
</div></code></pre>
<p>Adds the file to the staging tree.</p>
<p><code>git status</code> tells us that <em>explorers/.gitkeep</em> is in staging and ready to commit. At this state it wants to save the <em>.gitkeep</em> file.</p>
<pre class="hljs"><code><div>	git commit -m <span class="hljs-string">"Track explorers directory."</span>
</div></code></pre>
<p>Completes the process. Now if I make changes to <em>.gitkeep</em> it will track changes and if my project is cloned it will contain the <em>explorers</em> directory.</p>
<p>If you want to create an empty file in a directory you can use the following command:</p>
<pre class="hljs"><code><div>	touch temp/.gitkeep
</div></code></pre>
<h3 id="additional-notes">Additional Notes</h3>
<p>I have also noticed an interesting Git command in Stackoverflow.</p>
<pre class="hljs"><code><div>	git reflog
</div></code></pre>
<p>Shows one line for each commit.</p>
<pre class="hljs"><code><div>	git reflog -all
</div></code></pre>
<p>Shows the HEAD information for each commit. Maybe a bit too much information.</p>
<p>You can also get a complete list of your bash history by using the following command.</p>
<pre class="hljs"><code><div>	<span class="hljs-built_in">history</span> &gt; alan.log
</div></code></pre>
<p>This is a list of everything I have done in Git bash since I installed it.</p>
<p>The original file is kept in Users/alanr/.bash_history</p>
<h2 id="git-on-azure-devops">Git on Azure DevOps</h2>
<p>All of my Git repositories on Azure DevOps are private. This has never caused me any problems because I only usually keep repositories on my local PC.</p>
<p>I am now storing code in my WSL Ubuntu file structure as well and wanted to clone a repository to Ubuntu. I had problems because it wanted my username and password. I added these but the authentication failed.</p>
<p>It was an easy process to add authentication.</p>
<p>I opened my repository on username.VisualStudio.com and click the <code>clone</code> button. I then click on <strong>Generate Git Credentials</strong> and this generates a password that I can use for cloning the repository.</p>
<p>I can interrogate the repository with the following command.</p>
<pre class="hljs"><code><div>	git config --list
</div></code></pre>
<p>If you want to interrogate a remote Github repository use this command.</p>
<pre class="hljs"><code><div>	git remote show origin
</div></code></pre>
<p>I will also need the generated password to get this information.</p>
<p><strong>Note:</strong> If I want to <code>push</code> or <code>pull</code> commits to my Ubuntu file structure I have to use this generated password so it is vitally important that I don't lose this password.</p>
<h2 id="advanced-git">Advanced Git</h2>
<p>Sometimes you will make a bad commit and will need to roll back. Some of these commands will change the Git history and some will not.</p>
<pre class="hljs"><code><div>	git branch
</div></code></pre>
<blockquote>
<p>* master</p>
</blockquote>
<h3 id="create-a-new-branch">Create a new branch</h3>
<pre class="hljs"><code><div>	git checkout -b feature
</div></code></pre>
<p>The <strong>-b</strong> option will create and switch you to the <strong>feature</strong> branch. Check your branch again.</p>
<pre class="hljs"><code><div>	git branch
</div></code></pre>
<blockquote>
<p>* feature<br>
main</p>
</blockquote>
<p>Now you see that you are on branch <strong>feature</strong>.</p>
<h3 id="switch-back-to-main-branch">Switch back to main branch</h3>
<pre class="hljs"><code><div>	git checkout main
</div></code></pre>
<blockquote>
<p>feature<br>
* main</p>
</blockquote>
<p>Will send you back to the <strong>main</strong> branch.</p>
<h3 id="removing-code-that-you-have-added-to-a-file">Removing code that you have added to a file</h3>
<p>You have added some code to a file.</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<blockquote>
<p>On branch main	<br>
Changes not staged for commit:<br>
(use &quot;git add <file>...&quot; to update what will be committed)<br>
(use &quot;git restore <file>...&quot; to discard changes in working directory)<br>
modified:   test.js</p>
<p>no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</p>
</blockquote>
<p>Now, do a <strong>diff</strong>.</p>
<pre class="hljs"><code><div>	git diff
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>diff --git a/test.js b/test.js<br>
index 0f2c435..3b7e699 100644<br>
--- a/test.js<br>
+++ b/test.js<br>
@@ -21,3 +21,10 @@ let yearsUntilRetirement = (year, firstName) =&gt; {<br>
yearsUntilRetirement(yearBorn, firstName);</p>
<p>yearsUntilRetirement(1952, 'Alan');<br>
+<br>
+let addNumbers = (a, b) =&gt; {</p>
<p>* return a + b;<br>
+}</p>
<p>*<br>
+let total = addNumbers(7, 12);<br>
+console.log(total)</p>
</blockquote>
<p>Now I have decided I don't want to keep this code and I want to revert to my previous code.</p>
<pre class="hljs"><code><div>	git checkout test.js
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>Updated 1 path from the index</p>
</blockquote>
<p>Now, check the status</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>On branch main<br>
nothing to commit, working tree clean</p>
</blockquote>
<p>If you now go back to you <strong>test.js</strong> file you will see that the new code has disappeared.</p>
<h3 id="reversing-a-faulty-git-commit-comment">Reversing a faulty Git commit comment</h3>
<p>I am going to change the <code>yearsUntilRetirement()</code> function by changing the retirement age from 65 to 67.</p>
<p>When I commit I accidentally name the function as <code>calculateAge()</code>.</p>
<pre class="hljs"><code><div>	git add *

	git commit -m <span class="hljs-string">"Updated calculateAge function."</span>

	git <span class="hljs-built_in">log</span>
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>commit c42282c6889ad5311a1892222fe0d5d1a2c0d806 (HEAD -&gt; main)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 17:29:53 2022 +1000</p>
<pre><code>Updated calculateAge function.
</code></pre>
</blockquote>
<p>We now realise that we have named the wrong function in the commit message.</p>
<p>How do we change this message without adding another commit?</p>
<pre class="hljs"><code><div>	git commit --amend -m <span class="hljs-string">"Updated yearsUntilRetirement() function."</span>
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>[main 848aa1d] Updated yearsUntilRetirement() function.<br>
Date: Wed Jun 15 17:29:53 2022 +1000<br>
1 file changed, 1 insertion(+), 1 deletion(-)</p>
</blockquote>
<p>Now do a <code>log</code>.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span>
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>commit 848aa1df9301323df6fa0e5a05bd71b4795ad8a0 (HEAD -&gt; main)	<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 17:29:53 2022 +1000</p>
<pre><code>Updated yearsUntilRetirement() function.
</code></pre>
</blockquote>
<p>You can see the correct function name.</p>
<p><strong>Note:</strong></p>
<p><strong>This is important.</strong> This command changes the git <strong>history</strong>. You can see that the SHA hash value has changed between the two commits. You should only do this when you are working locally and nobody on your team has seen the initial commit. If we push the changes and other people see the changes that it will cause problems in their repositories.</p>
<p>We only want to change the history when we are the only ones that have access to the changes we have made.</p>
<p>Later we will look at ways that we can make changes without changing the history.</p>
<p>If you are the only one working on this file then changing the commit message will clean up your commit messages and that is a good thing.</p>
<h3 id="adding-files-after-git-commit">Adding files after git commit</h3>
<p>Imagine that we want to add a file to the previous commit.</p>
<pre class="hljs"><code><div>	touch test2.js
</div></code></pre>
<p>Now, we Add that file to the staging area.</p>
<pre class="hljs"><code><div>	git add test2.js
</div></code></pre>
<p>do a Status command.</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<blockquote>
<p>On branch main<br>
Changes to be committed:<br>
(use &quot;git restore --staged <file>...&quot; to unstage)<br>
new file:   test2.js</p>
</blockquote>
<p>We can now commit that file to the previous commit.</p>
<pre class="hljs"><code><div>	git commit --amend
</div></code></pre>
<p>This will open an interactive text editor with the contents.</p>
<blockquote>
<p>Update yearsUntilRetirement() function.</p>
<p>Please enter the commit message for your changes. Lines starting<br>
with '#' will be ignored, and an empty message aborts the commit.</p>
<p>Date:      Wed Jun 15 17:29:53 2022 +1000</p>
<p>On branch main<br>
Changes to be committed:<br>
modified:   test.js<br>
new file:   test2.js</p>
</blockquote>
<p>We don't want to change the commit message and we only want to add the test2.js file to the previous commit. To save the edits.</p>
<pre class="hljs"><code><div>	!wc
</div></code></pre>
<p>And this will close the editor.</p>
<p>If you do a <code>git log</code> you will see that the last commit is that same as the previous commit.</p>
<p>Now do:</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span> --<span class="hljs-built_in">stat</span>
</div></code></pre>
<p>This will show us the files that were changed within a commit.</p>
<blockquote>
<p>commit 4e4281f66b804abc4f69f62a6fa5546cc9163667 (HEAD -&gt; main)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 17:29:53 2022 +1000</p>
<pre><code>Update yearsUntilRetirement() function.
</code></pre>
<p>test.js  | 2 +-<br>
test2.js | 0<br>
2 files changed, 1 insertion(+), 1 deletion(-)</p>
</blockquote>
<p>The line <strong>test2.js | 0</strong> means that the file has been added to the previous commit.</p>
<p>Once again you should be aware that you have changed the Git History.</p>
<h3 id="resetting-a-commit">Resetting a commit</h3>
<p>We can remove the last commit. First to a <code>git log</code>.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span>
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>commit 4e4281f66b804abc4f69f62a6fa5546cc9163667 (HEAD -&gt; main)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 17:29:53 2022 +1000</p>
<pre><code>Update yearsUntilRetirement() function.
</code></pre>
<p>commit f7efadb366c096ea27d5a39eb21ef6acd0987d52 (feature)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 16:32:31 2022 +1000</p>
<pre><code>Add functions.
</code></pre>
<p>commit 9134a1035b5fe2ce5860c15994c073e908fdc609<br>
Author: Alan Robson &lt;...</p>
</blockquote>
<p>We want to remove the commit with the hash value of <strong>4e4281f6</strong>.</p>
<p>There are 3 types of <strong>reset</strong>.</p>
<h4 id="git-reset---soft">git reset --soft</h4>
<pre class="hljs"><code><div>	git reset --soft f7efadb
</div></code></pre>
<p>The hash value is the second last commit.</p>
<p>This removes the last commit (4e4281f6) and doing a <code>git log</code> shows that the last commit has been removed.</p>
<blockquote>
<p>commit f7efadb366c096ea27d5a39eb21ef6acd0987d52 (HEAD -&gt; main, feature)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 16:32:31 2022 +1000</p>
<pre><code>Add functions.
</code></pre>
<p>commit 9134a1035b5fe2ce5860c15994c073e908fdc609<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 16:13:41 2022 +1000</p>
<pre><code>Initial commit.
</code></pre>
</blockquote>
<p>Now, if you do a <code>git status</code>.</p>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>On branch main<br>
Changes to be committed:<br>
(use &quot;git restore --staged <file>...&quot; to unstage)<br>
modified:   test.js<br>
new file:   test2.js</p>
</blockquote>
<p>With a <strong>soft reset</strong> you get to keep your changes from the last commit.</p>
<h4 id="git-reset---mixed">Git reset --mixed</h4>
<p>Is the <strong>default</strong> for a reset. So once again get the same hash value you used previously.</p>
<pre class="hljs"><code><div>	git reset f7efadb
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>Unstaged changes after reset:<br>
M       test.js</p>
</blockquote>
<p>Then do a <code>git status</code> and see what it returns.</p>
<blockquote>
<p>On branch main<br>
Changes not staged for commit:<br>
(use &quot;git add <file>...&quot; to update what will be committed)<br>
(use &quot;git restore <file>...&quot; to discard changes in working directory)<br>
modified:   test.js</p>
<p>Untracked files:<br>
(use &quot;git add <file>...&quot; to include in what will be committed)<br>
test2.js</p>
<p>no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</p>
</blockquote>
<p><code>git reset --mixed</code> has taken the changes from the staging area and put them into the working directory.</p>
<p>The difference between <code>--soft</code> and <code>--mixed</code> is that <code>--soft</code> puts the committed files back in the staging area and <code>--mixed</code> puts the files back in the working area.</p>
<p>We don't want to keep the changes we have made so we can do a <code>git reset --hard</code>.</p>
<h4 id="git-reset---hard">git reset --hard</h4>
<p>Grab the same hash again.</p>
<pre class="hljs"><code><div>	git reset --hard f7efadb
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>HEAD is now at f7efadb Add functions.</p>
</blockquote>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span>
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>commit f7efadb366c096ea27d5a39eb21ef6acd0987d52 (HEAD -&gt; main, feature)<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a><br>
Date:   Wed Jun 15 16:32:31 2022 +1000</p>
<pre><code>Add functions.
</code></pre>
<p>commit 9134a1035b5fe2ce5860c15994c073e908fdc609</p>
</blockquote>
<p>Our last commit has gone. Now if we do a <code>git status</code> it returns.</p>
<blockquote>
<p>On branch main<br>
Untracked files:<br>
(use &quot;git add <file>...&quot; to include in what will be committed)<br>
test2.js</p>
<p>nothing added to commit but untracked files present (use &quot;git add&quot; to track)</p>
</blockquote>
<p>Remember that <code>git reset --hard</code> will return out tracked files to the state that they were in with the hash (f7efadb) commit.</p>
<p><strong>Note:</strong> that with a <code>--hard</code> reset it will leave the new file as untracked. It won't remove the file(s).</p>
<p>Be careful with <code>git reset --hard</code> you will lose all of your tracked changes up to that commit hash.</p>
<h3 id="git-clean">git clean</h3>
<p>If we want to get rid of the untracked files we can use.</p>
<pre class="hljs"><code><div>	git clean -df
</div></code></pre>
<p>Where <code>-d</code> is untracked directories and <code>-f</code> is untracked files.</p>
<p>Returns.</p>
<blockquote>
<p>Removing test2.js</p>
</blockquote>
<pre class="hljs"><code><div>	git status
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>On branch main<br>
nothing to commit, working tree clean</p>
</blockquote>
<p>So now we are completely back to the state of the previous commit.</p>
<p>This is really handy to get rid of untracked files and directories. For example, imagine you unzipped a zip file in your git repository and then wanted to remove all of the files and directories you accidentally created? A <code>git clean</code> can clean up your untracked files and directories for you. If you tried to manually delete these files it would cause you problems and you many leave untracked files around.</p>
<h3 id="git-reflog">Git reflog</h3>
<p>Imagine that the changes that you deleted contained code that you now want to retrieve. You can use a <code>reflog</code> to see a list of changes you have made.</p>
<pre class="hljs"><code><div>	git reflog
</div></code></pre>
<blockquote>
<p>f7efadb (HEAD -&gt; main, feature) HEAD@{0}: reset: moving to f7efadb			<br>
f7efadb (HEAD -&gt; main, feature) HEAD@{1}: reset: moving to f7efadb			<br>
f7efadb (HEAD -&gt; main, feature) HEAD@{2}: reset: moving to f7efadb			<br>
4e4281f HEAD@{3}: commit (amend): Update yearsUntilRetirement() function.			<br>
04fd5b8 HEAD@{4}: commit (amend): 1 3 41			<br>
848aa1d HEAD@{5}: commit (amend): Updated yearsUntilRetirement() function.			<br>
c42282c HEAD@{6}: commit: Updated calculateAge function.			<br>
f7efadb (HEAD -&gt; main, feature) HEAD@{7}: checkout: moving from feature to main			<br>
f7efadb (HEAD -&gt; main, feature) HEAD@{8}: checkout: moving from main to feature			<br>
f7efadb (HEAD -&gt; main, feature) HEAD@{9}: commit: Add functions.			<br>
9134a10 HEAD@{10}: commit (initial): Initial commit.</p>
</blockquote>
<p><strong>NOTE:</strong> Git garbage collection will only store these changes for around 30 days.</p>
<p>The following commit line contains the changes that we have deleted and we want to get back to this state.</p>
<blockquote>
<p>848aa1d HEAD@{5}: commit (amend): Updated yearsUntilRetirement() function.</p>
</blockquote>
<p>We can return to this with.</p>
<pre class="hljs"><code><div>	git checkout 848aa1d
</div></code></pre>
<p>When we go back into our code we can see the retirement age has been increased to 67 which was our only change.</p>
<pre class="hljs"><code><div>	<span class="hljs-keyword">let</span> retirement = <span class="hljs-number">67</span> - age;
</div></code></pre>
<p>If we do a <code>git log</code> we can see that we have our commit back (848aa1d).</p>
<blockquote>
<p>commit 848aa1df9301323df6fa0e5a05bd71b4795ad8a0 (HEAD)			<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a>			<br>
Date:   Wed Jun 15 17:29:53 2022 +1000</p>
<pre><code>Updated yearsUntilRetirement() function.			
</code></pre>
<p>commit f7efadb366c0</p>
</blockquote>
<p>Right now we are in a detached HEAD state. A simple explanation for this is that we aren't on a branch and where we are at present will be trashed in the future.</p>
<p>We can create a branch to store these changes.</p>
<pre class="hljs"><code><div>	git branch backup
</div></code></pre>
<p>Now if we do a <code>git branch</code> we can see.</p>
<blockquote>
<p>* (HEAD detached at 848aa1d)			<br>
backup			<br>
feature			<br>
main</p>
</blockquote>
<p>Now, we want to get back to the <strong>main</strong> branch.</p>
<pre class="hljs"><code><div>	git checkout main
</div></code></pre>
<p>Now do a <code>branch</code> again.</p>
<pre class="hljs"><code><div>	git branch
</div></code></pre>
<p>We get the following message.</p>
<blockquote>
<p>Previous HEAD position was 848aa1d Updated yearsUntilRetirement() function.			<br>
Switched to branch 'main'</p>
</blockquote>
<p>Checking our code we are back to.</p>
<blockquote>
<p>let retirement = 65 - age;</p>
</blockquote>
<p>Check the branches.</p>
<blockquote>
<p>backup			<br>
feature			<br>
* main</p>
</blockquote>
<p><code>git reflog</code> can be a lifesaver if you thought you lost some code and can really help you out if you know how to use it.</p>
<h3 id="seeing-changes-between-branches">Seeing changes between branches</h3>
<p>Go back to the <strong>backup</strong> branch.</p>
<pre class="hljs"><code><div>	git checkout backup
</div></code></pre>
<p>Now.</p>
<pre class="hljs"><code><div>	git <span class="hljs-built_in">log</span>
</div></code></pre>
<blockquote>
<p>commit 848aa1df9301323df6fa0e5a05bd71b4795ad8a0 (HEAD -&gt; backup)			<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a>			<br>
Date:   Wed Jun 15 17:29:53 2022 +1000</p>
<pre><code>Updated yearsUntilRetirement() function.			
</code></pre>
<p>commit f7efadb366c096ea27d5a39eb21ef6acd0987d52 (main, feature)			<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a>			<br>
Date:   Wed Jun 15 16:32:31 2022 +1000</p>
<pre><code>Add functions.			
</code></pre>
<p>commit 9134a1035b5fe2ce5860c15994c073e908fdc609			<br>
Author: Alan Robson <a href="mailto:alanr@live.com.au">alanr@live.com.au</a>			<br>
Date:   Wed Jun 15 16:13:41 2022 +1000</p>
</blockquote>
<p>We want to see what was changed in hash 848aa1d.</p>
<pre class="hljs"><code><div>	git diff 848aa1d f7efadb
</div></code></pre>
<p>Returns.</p>
<blockquote>
<p>diff --git a/test.js b/test.js<br>
index 5a63442..0f2c435 100644<br>
--- a/test.js<br>
+++ b/test.js<br>
@@ -9,7 +9,7 @@ console.log('The age is ' + age); // The age is 34</p>
<p>let yearsUntilRetirement = (year, firstName) =&gt; {<br>
let age = calculateAge(year); // you can call a function within a function</p>
<p>* let retirement = 67 - age;</p>
<p>* let retirement = 65 - age;</p>
<pre><code> if (retirement &gt; 0) {    
     console.log(firstName + ' retires in ' + retirement + ' years.');
</code></pre>
</blockquote>
<p>This now shows us that in the backup we changed the retirement age from 65 to 67.</p>
<p>We will now return to <strong>main</strong></p>
<pre class="hljs"><code><div>	git checkout main
</div></code></pre>
<h3 id="git-revert">Git revert</h3>
<p><code>git revert</code> will allow you to keep your history. I will look at this in the future.</p>

</body>
</html>
